{% extends "base.html" %}
{% block title %}Add Asset{% endblock %}
{% block content %}

{% block subnav %}
{% include "subnav.html" %}
{% endblock %}

<h1>Add Asset</h1>
  
  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      {% for category, msg in messages %}
        <div class="alert alert-{{ category }} mt-2">{{ msg }}</div>
      {% endfor %}
    {% endif %}
  {% endwith %}

  <form method="post" class="mt-3">
    <div class="mb-3">
      <label for="asset_tag">Asset Tag *</label>
      <input id="asset_tag" name="asset_tag" class= "form-control" required>
    </div>

    <div class="mb-3">
      <label for="name" class="form-label">Name *</label>
      <input id="name" name="name" class="form-control" required>
    </div>  

    <div class="mb-3">
      <label for="description" class="form-label">Description</label>
      <textarea id="description" name="description" class="form-control"></textarea>
    </div>  

    <div class="mb-3">
      <label for="purchase_date">Purchase Date</label>
      <input id="purchase_date" name="purchase_date" type="date" class="form-control">
    </div>
      
    <div class="mb-3">
      <label for="purchase_cost">Purchase Cost</label>
      <input id="purchase_cost" name="purchase_cost" type="number" step="0.01" class="form-control">
    </div>  
      
    <div class="mb-3">
      <label for="serial_number">Serial Number</label>
      <input id="serial_number" name="serial_number" class="form-control">
    </div>  
      
    <button type="submit" class="btn btn-success">Add Asset</button>
  </form>

<p></p>

 <h1>All Assets</h1>
  <table class="table table-striped">
    <thead>
      <tr>
        <th>ID</th>
        <th>Tag</th>
        <th>Name</th>
        <th>Description</th>
        <th>Purchase Date</th>
        <th>Cost</th>
        <th>Serial Number</th>
      </tr>
    </thead>
       <tbody>
      {% for asset in assets %}
      <tr>
        <td>{{ asset.asset_id }}</td>
        <td>{{ asset.asset_tag }}</td>
        <td>{{ asset.name }}</td>
        <td>{{ asset.description or "" }}</td>
        <td>{{ asset.purchase_date or "" }}</td>
        <td>{{ asset.purchase_cost or "" }}</td>
        <td>{{ asset.serial_number or "" }}</td>
        <td>
            <a href="/assets/delete/{{ asset.asset_id }}" class="btn btn-primary ms-2">Delete</a>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
{% endblock %}
